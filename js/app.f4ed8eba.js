(function(){"use strict";var t={8761:function(t,e,o){var r=o(3751),s=o(641),n=o(33);const a=t=>((0,s.Qi)("data-v-2d74bdb1"),t=t(),(0,s.jt)(),t),l={id:"app"},i=a((()=>(0,s.Lk)("h1",null,"After School Classes",-1)));function c(t,e,o,r,a,c){const d=(0,s.g2)("LessonComponent"),u=(0,s.g2)("CheckoutForm");return(0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("header",null,[i,(0,s.Lk)("button",{onClick:e[0]||(e[0]=t=>a.showCheckout=!a.showCheckout)},(0,n.v_)(a.showCheckout?"Back to Lessons":"View Cart")+" ("+(0,n.v_)(a.cart.length)+") ",1)]),a.showCheckout?((0,s.uX)(),(0,s.Wv)(u,{key:1,cart:a.cart,onRemoveFromCart:c.removeFromCart,onSubmitOrder:c.submitOrder},null,8,["cart","onRemoveFromCart","onSubmitOrder"])):((0,s.uX)(),(0,s.Wv)(d,{key:0,canAddToCart:c.canAddToCart,cartCount:c.cartCount,onAddToCart:c.addToCart},null,8,["canAddToCart","cartCount","onAddToCart"]))])}o(4114);const d=t=>((0,s.Qi)("data-v-812359d0"),t=t(),(0,s.jt)(),t),u={class:"d-flex align-items-end gap-3 flex-wrap mb-3"},h=d((()=>(0,s.Lk)("label",{for:"search",class:"form-label"},"Search",-1))),p=d((()=>(0,s.Lk)("label",{for:"sortAttribute",class:"form-label"},"Sort By:",-1))),m=(0,s.Fv)('<option value="title" data-v-812359d0>Title</option><option value="subject" data-v-812359d0>Subject</option><option value="location" data-v-812359d0>Location</option><option value="price" data-v-812359d0>Price</option><option value="spaces" data-v-812359d0>Spaces</option>',5),v=[m],k=d((()=>(0,s.Lk)("label",{for:"sortOrder",class:"form-label"},"Sort Order:",-1))),L=d((()=>(0,s.Lk)("option",{value:"asc"},"Ascending",-1))),b=d((()=>(0,s.Lk)("option",{value:"desc"},"Descending",-1))),f=[L,b],C={id:"main-wrapper"},y={class:"product-container"},O={class:"lesson-details"},g=["onClick","disabled"],_={key:0},w={key:1};function A(t,e,o,a,l,i){return(0,s.uX)(),(0,s.CE)("div",null,[(0,s.Lk)("div",u,[(0,s.Lk)("div",null,[h,(0,s.bo)((0,s.Lk)("input",{id:"search",type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>l.searchTerm=t),placeholder:"search for a lesson...",onInput:e[1]||(e[1]=(...t)=>i.searchLessons&&i.searchLessons(...t))},null,544),[[r.Jo,l.searchTerm]])]),(0,s.Lk)("div",null,[p,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.sortAttribute=t),class:"form-select",onChange:e[3]||(e[3]=(...t)=>i.searchLessons&&i.searchLessons(...t))},v,544),[[r.u1,l.sortAttribute]])]),(0,s.Lk)("div",null,[k,(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>l.sortOrder=t),class:"form-select",onChange:e[5]||(e[5]=(...t)=>i.searchLessons&&i.searchLessons(...t))},f,544),[[r.u1,l.sortOrder]])])]),(0,s.Lk)("main",C,[(0,s.Lk)("div",y,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.lessons,((t,e)=>((0,s.uX)(),(0,s.CE)("div",{class:"product",key:e},[(0,s.Lk)("i",{class:(0,n.C4)(t.icon)},null,2),(0,s.Lk)("div",O,[(0,s.Lk)("h2",null,(0,n.v_)(t.title),1),(0,s.Lk)("p",null,"Location: "+(0,n.v_)(t.Location),1),(0,s.Lk)("p",null,"Price: "+(0,n.v_)(t.price),1),(0,s.Lk)("p",null,"Slots Available: "+(0,n.v_)(t.spaces),1),(0,s.Lk)("button",{class:"success-button",onClick:e=>i.addLessonToCart(t),disabled:0===t.availableInventory},"Add to Cart",8,g),0===t.availableInventory?((0,s.uX)(),(0,s.CE)("span",_,"All out!")):t.availableInventory<5?((0,s.uX)(),(0,s.CE)("span",w,"Only "+(0,n.v_)(t.availableInventory-o.cartCount(t._id))+" left!",1)):(0,s.Q3)("",!0)])])))),128))])])])}var T={name:"LessonComponent",props:["canAddToCart","cartCount","add-to-cart"],data(){return{lessons:[],searchTerm:"",sortAttribute:"subject",sortOrder:"asc",baseURL:"https://cw2-backend-lyart.vercel.app/"}},created(){this.fetchLessons()},methods:{async fetchLessons(){try{const t=await fetch(`${this.baseURL}collection/lessons`);this.lessons=await t.json()}catch(t){console.error("Error fetching lessons:",t)}},async searchLessons(){var t=`?search=${this.searchTerm}&sort=${this.sortAttribute}&order=${this.sortOrder}`,e=await fetch(`${this.baseURL}search/collection/lessons/${t}`);this.lessons=await e.json()},addLessonToCart(t){this.$emit("add-to-cart",t)}}},F=o(6262);const S=(0,F.A)(T,[["render",A],["__scopeId","data-v-812359d0"]]);var N=S;const j=t=>((0,s.Qi)("data-v-dd869c3a"),t=t(),(0,s.jt)(),t),E={class:"checkout-form"},U={class:"checkout"},X=j((()=>(0,s.Lk)("h2",null,"Checkout",-1))),I=j((()=>(0,s.Lk)("strong",null,"First Name:",-1))),$=j((()=>(0,s.Lk)("strong",null,"Last Name:",-1))),P=j((()=>(0,s.Lk)("strong",null,"Phone:",-1))),V={key:0,style:{color:"red"}},x=j((()=>(0,s.Lk)("h2",null,"Order Information",-1))),R=["disabled"],J={key:1},Q={class:"cart"},W=j((()=>(0,s.Lk)("h2",null,"Shopping Cart",-1))),B={class:"cart-list"},K={class:"cart-item"},D={class:"product-details"},q=j((()=>(0,s.Lk)("strong",null,"Location:",-1))),z=j((()=>(0,s.Lk)("strong",null,"Price:",-1))),G=j((()=>(0,s.Lk)("strong",null,"Slots Available:",-1))),H=["onClick"];function M(t,e,o,a,l,i){return(0,s.uX)(),(0,s.CE)("div",E,[(0,s.Lk)("div",U,[X,(0,s.Lk)("p",null,[I,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>l.order.firstName=t)},null,512),[[r.Jo,l.order.firstName,void 0,{trim:!0}]])]),(0,s.Lk)("p",null,[$,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>l.order.lastName=t)},null,512),[[r.Jo,l.order.lastName,void 0,{trim:!0}]])]),(0,s.Lk)("p",null,[P,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>l.order.phone=t),type:"tel"},null,512),[[r.Jo,l.order.phone,void 0,{number:!0}]])]),i.isFormValid?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("p",V,"Please fill in all fields.")),x,(0,s.Lk)("p",null,"First Name: "+(0,n.v_)(l.order.firstName),1),(0,s.Lk)("p",null,"Last Name: "+(0,n.v_)(l.order.lastName),1),(0,s.Lk)("p",null,"Phone Number: "+(0,n.v_)(l.order.phone),1),(0,s.Lk)("button",{onClick:e[3]||(e[3]=(...t)=>i.submitOrderForm&&i.submitOrderForm(...t)),disabled:!i.isFormValid},"Place Order",8,R),l.orderSubmitted?((0,s.uX)(),(0,s.CE)("p",J,"Order Submitted!")):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Q,[W,(0,s.Lk)("ul",B,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.cart,((t,e)=>((0,s.uX)(),(0,s.CE)("li",{key:e},[(0,s.Lk)("div",K,[(0,s.Lk)("i",{class:(0,n.C4)(t.icon)},null,2),(0,s.Lk)("div",D,[(0,s.Lk)("h3",null,(0,n.v_)(t.title),1),(0,s.Lk)("p",null,[q,(0,s.eW)(" "+(0,n.v_)(t.Location),1)]),(0,s.Lk)("p",null,[z,(0,s.eW)(" "+(0,n.v_)(t.price),1)]),(0,s.Lk)("p",null,[G,(0,s.eW)(" "+(0,n.v_)(t.spaces),1)])]),(0,s.Lk)("button",{onClick:e=>i.removeFromCart(t._id),class:"remove-button"},"Remove",8,H)])])))),128))])])])}var Y={name:"CheckoutForm",props:["cart","submit-order"],data(){return{order:{firstName:"",lastName:"",phone:""},orderSubmitted:!1}},computed:{isFormValid(){return this.order.firstName&&this.order.lastName&&this.order.phone}},methods:{removeFromCart(t){this.$emit("remove-from-cart",t)},submitOrderForm(){this.isFormValid&&this.$emit("submit-order",this.order)}}};const Z=(0,F.A)(Y,[["render",M],["__scopeId","data-v-dd869c3a"]]);var tt=Z,et={name:"App",components:{LessonComponent:N,CheckoutForm:tt},data(){return{lessons:[],cart:[],showCheckout:!1,baseURL:"https://cw2-backend-lyart.vercel.app/"}},methods:{async submitOrder(t){try{this.cart.forEach((t=>{fetch(`${this.baseURL}collection/lessons/${t._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({spaces:t.spaces-this.cart.filter((e=>e._id===t._id)).length})})}));const e=await fetch(`${this.baseURL}collection/orders`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,cart:this.cart})});e.ok&&(this.cart.length=0,this.showCheckout=!1,alert("Order Submitted"))}catch(e){console.error("Error submitting order:",e)}},canAddToCart(t){return t.spaces>this.cartCount(t._id)},cartCount(t){return this.cart.filter((e=>e._id===t)).length},addToCart(t){this.canAddToCart(t)&&this.cart.push(t)},removeFromCart(t){const e=this.cart.findIndex((e=>e._id===t));-1!==e&&this.cart.splice(e,1)}}};const ot=(0,F.A)(et,[["render",c],["__scopeId","data-v-2d74bdb1"]]);var rt=ot;(0,r.Ef)(rt).mount("#app")}},e={};function o(r){var s=e[r];if(void 0!==s)return s.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,o),n.exports}o.m=t,function(){var t=[];o.O=function(e,r,s,n){if(!r){var a=1/0;for(d=0;d<t.length;d++){r=t[d][0],s=t[d][1],n=t[d][2];for(var l=!0,i=0;i<r.length;i++)(!1&n||a>=n)&&Object.keys(o.O).every((function(t){return o.O[t](r[i])}))?r.splice(i--,1):(l=!1,n<a&&(a=n));if(l){t.splice(d--,1);var c=s();void 0!==c&&(e=c)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[r,s,n]}}(),function(){o.d=function(t,e){for(var r in e)o.o(e,r)&&!o.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};o.O.j=function(e){return 0===t[e]};var e=function(e,r){var s,n,a=r[0],l=r[1],i=r[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(s in l)o.o(l,s)&&(o.m[s]=l[s]);if(i)var d=i(o)}for(e&&e(r);c<a.length;c++)n=a[c],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(d)},r=self["webpackChunkpetstore"]=self["webpackChunkpetstore"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=o.O(void 0,[504],(function(){return o(8761)}));r=o.O(r)})();
//# sourceMappingURL=app.f4ed8eba.js.map